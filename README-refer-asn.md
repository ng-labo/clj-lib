### about

This is one of demo application for clj-lib.

### explanation

With clj-lib.gobgpapi, this tries to retrive all ASN from as-path each prefixes.
IP2Location(TM)LITE help it to refer country code.

IP2LOCATION-LITE-DB1.CSV(.IPV6.CSV) is prepared in advance.

gobgpd is run with available bgp table on both ipv4 and ipv6.

example commands (insert comments manually)
```
clj-lib.core=>; load namespaces

clj-lib.core=> (use 'clj-lib.gobgpapi.core)
nil
clj-lib.core=> (use 'refer-asn.core)
nil
clj-lib.core=> ; create a gobgp client

clj-lib.core=> (def gcli (gobgp-client "localhost:50051"))
#'clj-lib.core/gcli
clj-lib.core=> (batch-run-ipv4 gcli test-file-ipv4 "prefix-cc-asn-ipv4.csv")
create-index  13012 msec
get-all-prefixes 1138654 msec 
count ip-asn-cc 788476 
lookup-cc  1293555 msec
"Elapsed time: 18446.887109 msecs"
nil
clj-lib.core=> (batch-run-ipv6 gcli test-file-ipv6 "prefix-cc-asn-ipv6.csv")
create-index  70405 msec
get-all-prefixes  21304 msec
count ip-asn-cc 81163
lookup-cc  122821 msec
"Elapsed time: 2155.082291 msecs"
nil
```

 In first step, 2 files(or just one file IPv4 is okay) are need that is resolved country-code and ASN to all prefixes. You can retrive these file to run (batch-run-ipvX ...) command on lein repl.
 Next, 2 files are concatnated. From this(prefix-cc-asn.csv in example), tool/make-mmdb.sh generates a mmdb.

```
$ cat prefix-cc-asn-ipv4.csv prefix-cc-asn-ipv6.csv > prefix-cc-asn.csv
$ sh tool/make-mmdb.sh
```

 Finally, ip-cc-asn.mmdb is generated by make-mmdb.sh.

### more challenges
- Make faster. The process both lookup prefixes and find country code is able to be threading.

